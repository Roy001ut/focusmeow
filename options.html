<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>FocusMeow è®¾ç½®</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: system-ui, 'PingFang SC', 'Microsoft YaHei', sans-serif;
      background: #faf6f2;
      color: #333;
      min-height: 100vh;
    }

    .top-bar {
      background: linear-gradient(135deg, #ff9eb5, #ffcc88);
      padding: 20px 40px;
      display: flex;
      align-items: center;
      gap: 12px;
      box-shadow: 0 2px 12px rgba(0,0,0,.1);
    }
    .top-bar-icon  { font-size: 36px; }
    .top-bar h1    { font-size: 22px; font-weight: 700; color: white;
                     text-shadow: 0 1px 3px rgba(0,0,0,.2); }
    .top-bar p     { font-size: 13px; color: rgba(255,255,255,.85); margin-top: 2px; }

    .container { max-width: 860px; margin: 0 auto; padding: 32px 24px; }

    /* Tab å¯¼èˆª */
    .tabs { display: flex; gap: 4px; margin-bottom: 24px; border-bottom: 2px solid #f0e0d0; }
    .tab-btn {
      padding: 9px 20px;
      border: none;
      background: transparent;
      font-size: 14px;
      color: #888;
      cursor: pointer;
      border-radius: 6px 6px 0 0;
      transition: all 0.15s;
      font-family: inherit;
    }
    .tab-btn:hover { background: #fff0ec; color: #ff6b88; }
    .tab-btn.active {
      background: white;
      color: #ff6b88;
      border: 2px solid #f0e0d0;
      border-bottom: 2px solid white;
      margin-bottom: -2px;
      font-weight: 600;
    }

    .tab-panel { display: none; }
    .tab-panel.active { display: block; }

    /* å¡ç‰‡ */
    .card {
      background: white;
      border-radius: 12px;
      padding: 22px 24px;
      margin-bottom: 20px;
      box-shadow: 0 2px 12px rgba(0,0,0,.05);
    }
    .card h2 {
      font-size: 16px;
      font-weight: 600;
      color: #444;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    /* URL è§„åˆ™åˆ—è¡¨ */
    .rule-list { display: flex; flex-direction: column; gap: 8px; margin-bottom: 14px; }
    .rule-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      background: #faf6f2;
      border-radius: 8px;
      border: 1px solid #f0e0d0;
    }
    .rule-item.whitelist { border-left: 3px solid #4caf50; }
    .rule-item.blacklist { border-left: 3px solid #f44336; }
    .rule-pattern {
      flex: 1;
      font-size: 13px;
      font-family: 'Courier New', monospace;
      color: #555;
    }
    .btn-del {
      padding: 3px 10px;
      border: 1px solid #ffb0b0;
      border-radius: 5px;
      background: white;
      color: #e05050;
      font-size: 12px;
      cursor: pointer;
      font-family: inherit;
    }
    .btn-del:hover { background: #fff0f0; }

    /* æ·»åŠ è§„åˆ™è¾“å…¥åŒº */
    .add-rule-row { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
    .add-rule-row input {
      flex: 1;
      min-width: 160px;
      padding: 8px 12px;
      border: 1.5px solid #e0d0c8;
      border-radius: 8px;
      font-size: 13px;
      font-family: 'Courier New', monospace;
      outline: none;
      transition: border-color 0.15s;
    }
    .add-rule-row input:focus { border-color: #ff9eb5; }
    .add-rule-row select {
      padding: 8px 12px;
      border: 1.5px solid #e0d0c8;
      border-radius: 8px;
      font-size: 13px;
      font-family: inherit;
      background: white;
      cursor: pointer;
      outline: none;
    }
    .btn-primary {
      padding: 8px 18px;
      border: none;
      border-radius: 8px;
      background: linear-gradient(135deg, #ff9eb5, #ff6b88);
      color: white;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      font-family: inherit;
      transition: opacity 0.15s;
    }
    .btn-primary:hover { opacity: 0.9; }

    /* è‡ªå®šä¹‰è´´å›¾åŒºåŸŸ */
    .skin-area { display: flex; gap: 24px; align-items: flex-start; flex-wrap: wrap; }

    .upload-zone {
      width: 140px;
      height: 140px;
      border: 2.5px dashed #e0c8c0;
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s;
      background: #fdf8f5;
      position: relative;
      overflow: hidden;
      flex-shrink: 0;
    }
    .upload-zone:hover { border-color: #ff9eb5; background: #fff5f7; }
    .upload-zone span  { font-size: 11px; color: #aaa; margin-top: 6px; text-align: center; line-height: 1.4; }
    .upload-zone .icon { font-size: 28px; }
    #upload-input { display: none; }
    #preview-img  { width: 100%; height: 100%; object-fit: cover; position: absolute; inset: 0; border-radius: 9px; }

    .crop-area {
      flex: 1;
      min-width: 220px;
    }
    .crop-area h3 { font-size: 14px; color: #666; margin-bottom: 12px; }

    /* Canvas è£å‰ªé¢„è§ˆ */
    #crop-canvas-container {
      position: relative;
      width: 200px;
      height: 200px;
      border-radius: 8px;
      overflow: hidden;
      background: #f0e8e0;
      margin-bottom: 12px;
    }
    #crop-canvas { width: 200px; height: 200px; display: block; }
    /* åœ†å½¢é®ç½©æŒ‡ç¤º */
    #crop-canvas-container::after {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 8px;
      box-shadow: inset 0 0 0 9999px rgba(240,232,224,.6);
      -webkit-mask: radial-gradient(circle 88px at center, transparent 87px, black 88px);
      mask: radial-gradient(circle 88px at center, transparent 87px, black 88px);
      pointer-events: none;
    }

    .crop-controls { display: flex; gap: 8px; flex-wrap: wrap; }
    .btn-secondary {
      padding: 6px 14px;
      border: 1.5px solid #e0d0c8;
      border-radius: 7px;
      background: white;
      font-size: 12px;
      color: #666;
      cursor: pointer;
      font-family: inherit;
      transition: all 0.15s;
    }
    .btn-secondary:hover { border-color: #ff9eb5; color: #ff6b88; }

    /* è´¦æˆ·é¢„ç•™åŒº */
    .account-placeholder {
      text-align: center;
      padding: 32px;
      color: #bbb;
      font-size: 13px;
    }
    .account-placeholder .icon { font-size: 40px; margin-bottom: 10px; }

    /* ä¿å­˜æç¤º */
    #save-toast {
      position: fixed;
      bottom: 32px;
      right: 32px;
      background: #4caf50;
      color: white;
      padding: 10px 20px;
      border-radius: 8px;
      font-size: 13px;
      font-weight: 600;
      opacity: 0;
      transition: opacity 0.3s;
      pointer-events: none;
      box-shadow: 0 4px 12px rgba(0,0,0,.15);
    }
    #save-toast.show { opacity: 1; }
  </style>
</head>
<body>

<div class="top-bar">
  <div class="top-bar-icon">ğŸ±</div>
  <div>
    <h1>FocusMeow è®¾ç½®</h1>
    <p>è‡ªå®šä¹‰ä½ çš„ä¸“æ³¨å–µä½“éªŒ</p>
  </div>
</div>

<div class="container">
  <div class="tabs">
    <button class="tab-btn active" data-tab="rules">ğŸ“‹ URL è§„åˆ™</button>
    <button class="tab-btn" data-tab="skin">ğŸ¨ è‡ªå®šä¹‰å¤–è§‚</button>
    <button class="tab-btn" data-tab="account">ğŸ‘¤ è´¦æˆ·ï¼ˆé¢„ç•™ï¼‰</button>
  </div>

  <!-- Tab 1ï¼šURL è§„åˆ™ç®¡ç† -->
  <div class="tab-panel active" id="tab-rules">
    <!-- ç™½åå• -->
    <div class="card">
      <h2>âœ… ä¸“æ³¨ç™½åå•ï¼ˆåœ¨è¿™äº›ç½‘ç«™ï¼Œå® ç‰©ä¼šé¼“åŠ±ä½ ï¼‰</h2>
      <div class="rule-list" id="whitelist-container">
        <!-- åŠ¨æ€æ¸²æŸ“ -->
      </div>
      <div class="add-rule-row">
        <input type="text" id="input-whitelist" placeholder="ä¾‹ï¼šscholar.google.com æˆ– *.edu"/>
        <button class="btn-primary" id="btn-add-white">+ æ·»åŠ </button>
      </div>
    </div>

    <!-- é»‘åå• -->
    <div class="card">
      <h2>ğŸš« æ‘¸é±¼é»‘åå•ï¼ˆåœ¨è¿™äº›ç½‘ç«™ï¼Œå® ç‰©ä¼šç”Ÿæ°”ï¼‰</h2>
      <div class="rule-list" id="blacklist-container">
        <!-- åŠ¨æ€æ¸²æŸ“ -->
      </div>
      <div class="add-rule-row">
        <input type="text" id="input-blacklist" placeholder="ä¾‹ï¼š*.netflix.com æˆ– bilibili.com"/>
        <button class="btn-primary" id="btn-add-black">+ æ·»åŠ </button>
      </div>
    </div>
  </div>

  <!-- Tab 2ï¼šè‡ªå®šä¹‰å¤–è§‚ -->
  <div class="tab-panel" id="tab-skin">
    <div class="card">
      <h2>ğŸ¾ å® ç‰©è„¸éƒ¨è´´å›¾</h2>
      <p style="font-size:13px;color:#888;margin-bottom:18px;">
        ä¸Šä¼ ä¸€å¼ å¤´åƒæˆ–å›¾ç‰‡ï¼Œå°†è¢«è£å‰ªä¸ºåœ†å½¢å¹¶å åŠ åˆ°çŒ«å’ªé¢éƒ¨åŒºåŸŸ
      </p>
      <div class="skin-area">
        <!-- ä¸Šä¼ åŒº -->
        <div class="upload-zone" id="upload-zone">
          <div class="icon">ğŸ“·</div>
          <span>ç‚¹å‡»ä¸Šä¼ <br/>JPG / PNG<br/>å»ºè®®æ­£æ–¹å½¢</span>
          <img id="preview-img" alt="" style="display:none"/>
          <input type="file" id="upload-input" accept="image/jpeg,image/png,image/webp"/>
        </div>

        <!-- è£å‰ªé¢„è§ˆ -->
        <div class="crop-area">
          <h3>é¢„è§ˆ Â· åœ†å½¢è£å‰ªåŒºåŸŸ</h3>
          <div id="crop-canvas-container">
            <canvas id="crop-canvas" width="200" height="200"></canvas>
          </div>
          <div class="crop-controls">
            <button class="btn-secondary" id="btn-zoom-in">ğŸ” æ”¾å¤§</button>
            <button class="btn-secondary" id="btn-zoom-out">ğŸ” ç¼©å°</button>
            <button class="btn-primary"   id="btn-apply-skin">åº”ç”¨è´´å›¾</button>
            <button class="btn-secondary" id="btn-clear-skin">ç§»é™¤</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Tab 3ï¼šè´¦æˆ·ï¼ˆé¢„ç•™ï¼‰ -->
  <div class="tab-panel" id="tab-account">
    <div class="card">
      <div class="account-placeholder">
        <div class="icon">ğŸ”</div>
        <p>è´¦æˆ·ç³»ç»Ÿæ­£åœ¨å¼€å‘ä¸­</p>
        <p style="margin-top:8px;font-size:12px">
          æœªæ¥å°†æ”¯æŒ Google OAuth ç™»å½•ï¼Œ<br/>å®ç°å¤šè®¾å¤‡æ•°æ®åŒæ­¥ä¸å® ç‰©æˆé•¿è®°å½•
        </p>
        <button class="btn-primary" style="margin-top:20px" disabled>
          å³å°†æ¨å‡º Â· Google ç™»å½•
        </button>
      </div>
    </div>
  </div>
</div>

<div id="save-toast">âœ“ è®¾ç½®å·²ä¿å­˜</div>

<script src="options.js"></script>
</body>
</html>
